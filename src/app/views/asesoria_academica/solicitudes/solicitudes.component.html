<app-404 *ngIf=!mostrarModulo></app-404>
<div class="animated fadeIn" *ngIf=mostrarModulo>
<div class="row">
  <div class="col-sm-12 ">
    <div class="card">
      <div class="card-header">
        <i class="fa fa-align-justify"></i> SOLICITUDES
        <small>PAAE</small>
      </div>
      <div class="card-body">
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link active" (click)="asesor()" href="#">Solicitud Asesor</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" (click)="alumno()" href="#">Solicitud de Asesoría</a>
          </li>
        </ul>
        <br><br>
        <div *ngIf="visasesor">
          <nav>
            <!-- <label class="btn btn-primary" style="cursor:pointer;">Leer Excel
              <input type="file" name="file" hidden accept=".csv, .xls, .xlsx" (change)="onFileChange($event)">
            </label> -->
            <label class="btn btn-primary" style="cursor:pointer;">Imprimir Excel
              <button type="button" (click)="generarExcel()" hidden></button></label>
            <label class="btn btn-primary">
              <select class="btn btn-primary" type="text" [(ngModel)]="periodo" (ngModelChange)="toNumber()">
                <option value="20191">20191</option>
                <option value="20192">20192</option>
                <option value="20201">20201</option>
                <option value="20202">20202</option>
                <option value="20211">20211</option>
                <option value="20212">20212</option>
                <option value="20221">20221</option>
                <option value="20222">20222</option>
                <option value="20231">20231</option>
                <option value="20232">20232</option>
                <option value="20241">20241</option>
              </select>

            </label>
            <!-- <button type="button" class="btn btn-primary" (click)="leerExcel()">Leer Excel</button> -->
            <ul class="pagination pull-right float-sm-right">
              <li class="page-item {{select1}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros('2')">2</a></li>
              <li class="page-item {{select2}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros('5')">5</a></li>
              <li class="page-item {{select3}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros('10')">10</a></li>
              <li class="page-item {{select4}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros('todos')">Mostrar todos</a></li>
            </ul>
          </nav>
          <table class="table table-bordered table-striped table-sm">
            <thead>
              <tr>
                <th scope="row">#</th>
                <th>ID ASESOR</th>
                <th>NOMBRE</th>
                <th>PRIMER APELLIDO</th>
                <th>SEGUNDO APELLIDO</th>
                <th>CORREO</th>
                <th>CELULAR</th>
                <th>MATERIA 1</th>
                <th>MATERIA 2</th>
                <th>MATERIA 3</th>
                <th>DIA</th>
                <th>HORA</th>
                <th>CAMPUS</th>
                <th>PERIODO</th>
                <th>VALIDA</th><!-- 
                <th>STATUS</th> -->
                <th>HOR/SEG</th>
                <th>ACCIONES</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td><input [(ngModel)]="filtroPK_ASESOR_ASESORIA_HORARIO" type="text" class="form-control"
                    (keyup)="buscar()">
                </td>
                <td><input [(ngModel)]="filtroname" type="text" class="form-control" (keyup)="buscar()"></td>
                <td><input [(ngModel)]="filtroPRIMER_APELLIDO" type="text" class="form-control" (keyup)="buscar()"></td>
                <td><input [(ngModel)]="filtroSEGUNDO_APELLIDO" type="text" class="form-control" (keyup)="buscar()">
                </td>
                <td><input [(ngModel)]="filtroCORREO" type="text" class="form-control" (keyup)="buscar()"></td>
                <td><input [(ngModel)]="filtroTELEFONO_MOVIL" type="text" class="form-control" (keyup)="buscar()">
                </td>
                <td>
                  <select [(ngModel)]="filtroMATERIA1" class="form-control" name="materia1" (change)="buscar()">
                    <option value="todas">Todas</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.MATERIA}}">{{asesor.MATERIA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroMATERIA2" class="form-control" name="materia2" (change)="buscar()">
                    <option value="todas">Todas</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.MATERIA1}}">{{asesor.MATERIA1}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroMATERIA3" class="form-control" name="materia3" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.MATERIA2}}">{{asesor.MATERIA2}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroDIA" class="form-control" name="dia" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.DIA}}">{{asesor.DIA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroHORA" class="form-control" name="hora" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.HORA}}">{{asesor.HORA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroCAMPUS" class="form-control" name="hora" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.CAMPUS}}">{{asesor.CAMPUS}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroPERIODO" class="form-control" name="hora" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.PERIODO}}">{{asesor.PERIODO}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroVALIDA" class="form-control" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.VALIDA}}">{{asesor.VALIDA}}
                  </select>
                </td>
               <!--  <td>
                  <select [(ngModel)]="filtroSTATUS" class="form-control" name="hora" (change)="buscar()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of asesor1" value="{{asesor.STATUS}}">{{asesor.STATUS}}
                  </select>
                </td> -->
                <td></td>
                <td></td>
              </tr>
              <tr
                *ngFor="let asesor of asesor1 | paginate: {itemsPerPage: registrosPagina, currentPage:pageActual, id: 'first' } let i = index">
                <td>{{i+1}}</td>
                <td>{{asesor.FK_USUARIO}}</td>
                <td>{{asesor.name}}</td>
                <td>{{asesor.PRIMER_APELLIDO}}</td>
                <td>{{asesor.SEGUNDO_APELLIDO}}</td>
                <td>{{asesor.email}}</td>
                <td>{{asesor.TELEFONO_MOVIL}}</td>
                <td>{{asesor.MATERIA}}</td>
                <td>{{asesor.MATERIA1}}</td>
                <td>{{asesor.MATERIA2}}</td>
                <td>{{asesor.DIA}}</td>
                <td>{{asesor.HORA}}</td>
                <td>{{asesor.CAMPUS}}</td>
                <td>{{asesor.PERIODO}}</td>
                <td>{{asesor.VALIDA}}</td><!-- 
                <td><span class="badge badge-success">{{asesor.STATUS}}</span></td> -->
                <td><button class="btn btn-brand btn-sm btn-facebook mr-1" style="margin-bottom: 4px" type="button"
                    data-toggle="modal" (click)="smallModal1.show()" (click)="horario(asesor.NUMERO_CONTROL)"><i
                      class="fa fa-clock-o"></i></button>
                  <button class="btn btn-brand btn-sm btn-flickr mr-1" style="margin-bottom: 4px" type="button"
                    data-toggle="modal" (click)="smallModal.show()" (click)="segui(asesor.NUMERO_CONTROL)"><i
                      class="cui-info"></i></button>
                </td>
                <td><button class="btn btn-brand btn-sm btn-openid" type="button" (click)="smallModal2.show()"
                    style="margin-bottom: 4px" (click)="modificar(asesor.PK_ASESOR_ASESORIA_HORARIO,asesor.MATERIA,
                    asesor.MATERIA1,asesor.MATERIA2,asesor.DIA,asesor.HORA,asesor.VALIDA)"><i
                      class="fa fa-edit"></i></button>
                  <button class="btn btn-brand btn-sm btn-youtube" type="button" style="margin-bottom: 4px"
                    (click)="borra(asesor.PK_ASESOR_ASESORIA_HORARIO)">
                    <i class="cui-delete"></i>
                  </button>
                </td>
              </tr>

              <!--               <tr>
                            <td>Zbyněk Phoibos</td>
                            <td>2012/02/01</td>
                            <td>Staff</td>
                            <td>
                              <span class="badge badge-danger">Banned</span>
                            </td>
                          </tr>
                          <tr>
                            <td>Einar Randall</td>
                            <td>2012/02/01</td>
                            <td>Admin</td>
                            <td>
                              <span class="badge badge-secondary">Inactive</span>
                            </td>
                          </tr>
                          <tr>
                            <td>Félix Troels</td>
                            <td>2012/03/01</td>
                            <td>Member</td>
                            <td>
                              <span class="badge badge-warning">Pending</span>
                            </td>
                          </tr>
                          <tr>
                            <td>Aulus Agmundr</td>
                            <td>2012/01/21</td>
                            <td>Staff</td>
                            <td>
                              <span class="badge badge-success">Active</span>
                            </td>
                          </tr> -->
            </tbody>
          </table>

          <div class="d-flex justify-content-center">
            <pagination-controls id="first" class="myPagination" previousLabel="" nextLabel="" maxSize="10"
              (pageChange)="pageActual = $event">
            </pagination-controls>
          </div>
          <!--           <nav>
                        <ul class="pagination">
                          <li class="page-item"><a class="page-link" href="#">Prev</a></li>
                          <li class="page-item active"><a class="page-link" href="#">1</a></li>
                          <li class="page-item"><a class="page-link" href="#">2</a></li>
                          <li class="page-item"><a class="page-link" href="#">3</a></li>
                          <li class="page-item"><a class="page-link" href="#">4</a></li>
                          <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                      </nav>   -->



          <!--/.col-->


        </div>
        <div *ngIf="visalumno">
          <nav>
            <!-- <label class="btn btn-primary" style="cursor:pointer;">Leer Excel
              <input type="file" name="file" hidden accept=".csv, .xls, .xlsx" (change)="onFileChange($event)">
            </label> -->
            <label class="btn btn-primary" style="cursor:pointer;">Imprimir Excel
              <button type="button" (click)="generarExcel1()" hidden></button></label>
            <label class="btn btn-primary">
              <select class="btn btn-primary" type="text" [(ngModel)]="periodo1" (ngModelChange)="toNumber1()">
                <option value="20191">20191</option>
                <option value="20192">20192</option>
                <option value="20201">20201</option>
                <option value="20202">20202</option>
                <option value="20211">20211</option>
                <option value="20212">20212</option>
                <option value="20221">20221</option>
                <option value="20222">20222</option>
                <option value="20231">20231</option>
                <option value="20232">20232</option>
                <option value="20241">20241</option>
              </select>

            </label>
            <ul class="pagination pull-right float-sm-right">
              <li class="page-item {{select11}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros1('2')">2</a></li>
              <li class="page-item {{select22}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros1('5')">5</a></li>
              <li class="page-item {{select33}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros1('10')">10</a></li>
              <li class="page-item {{select44}}"><a class="page-link" style="cursor: pointer"
                  (click)="mostrarRegistros1('todos')">Mostrar todos</a></li>
            </ul>
          </nav>
          <table class="table table-bordered table-striped table-sm">
            <thead>
              <tr>
                <th scope="row">#</th>
                <th>ID ALUMNO</th>
                <th>NOMBRE</th>
                <th>PRIMER APELLIDO</th>
                <th>SEGUNDO APELLIDO</th>
                <th>CORREO</th>
                <th>CELULAR</th>
                <th>MATERIA</th>
                <th>DIA</th>
                <th>HORA</th>
                <th>CAMPUS</th>
                <th>PERIODO</th><!-- 
                <th>STATUS</th> -->
                <th>ACCIONES</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td></td>
                <td><input [(ngModel)]="filtroPK_USER_ASESORIA_HORARIO" type="text" class="form-control"
                    (keyup)="buscar1()">
                </td>
                <td><input [(ngModel)]="filtroname1" type="text" class="form-control" (keyup)="buscar1()"></td>
                <td><input [(ngModel)]="filtroPRIMER_APELLIDO1" type="text" class="form-control" (keyup)="buscar1()">
                </td>
                <!--  <td><input [(ngModel)]="filtroPRIMER_APELLIDO" type="text" class="form-control" (keyup)="buscar1()">
                </td> -->
                <td><input [(ngModel)]="filtroSEGUNDO_APELLIDO1" type="text" class="form-control" (keyup)="buscar1()">
                </td>
                <td><input [(ngModel)]="filtroCORREO1" type="text" class="form-control" (keyup)="buscar1()"></td>
                <td><input [(ngModel)]="filtroTELEFONO_MOVIL1" type="text" class="form-control" (keyup)="buscar1()">
                </td>
                <td>
                  <select [(ngModel)]="filtroMATERIA11" class="form-control" name="materia2" (change)="buscar1()">
                    <option value="todas">Todas</option>
                    <option *ngFor="let asesor of solicitud" value="{{asesor.MATERIA}}">{{asesor.MATERIA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroDIA1" class="form-control" name="materia2" (change)="buscar1()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let asesor of solicitud" value="{{asesor.DIA}}">{{asesor.DIA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroHORA1" class="form-control" name="estatus" (change)="buscar1()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let estatus2 of solicitud" value="{{estatus2.HORA}}">{{estatus2.HORA}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroCAMPUS1" class="form-control" name="estatus" (change)="buscar1()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let estatus2 of solicitud" value="{{estatus2.CAMPUS}}">{{estatus2.CAMPUS}}
                  </select>
                </td>
                <td>
                  <select [(ngModel)]="filtroPERIODO1" class="form-control" name="estatus" (change)="buscar1()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let estatus2 of solicitud" value="{{estatus2.PERIODO}}">{{estatus2.PERIODO}}
                  </select>
                </td>
              <!--   <td>
                  <select [(ngModel)]="filtroSTATUS1" class="form-control" name="estatus" (change)="buscar1()">
                    <option value="todos">Todos</option>
                    <option *ngFor="let estatus2 of solicitud" value="{{estatus2.STATUS}}">{{estatus2.STATUS}}
                  </select>
                </td> -->
                <td></td>
              </tr>
              <tr
                *ngFor="let soli of solicitud | paginate: {itemsPerPage: registrosPagina1, currentPage:pageActual1, id: 'second'} let i = index">
                <td>{{i+1}}</td>
                <td>{{soli.FK_USUARIO}}</td>
                <td>{{soli.name}}</td>
                <td>{{soli.PRIMER_APELLIDO}}</td>
                <td>{{soli.SEGUNDO_APELLIDO}}</td>
                <td>{{soli.email}}</td>
                <td>{{soli.TELEFONO_MOVIL}}</td>
                <td>{{soli.MATERIA}}</td>
                <td>{{soli.DIA}}</td>
                <td>{{soli.HORA}}</td>
                <td>{{soli.CAMPUS}}</td>
                <td>{{soli.PERIODO}}</td><!-- 
                <td><span class="badge badge-success">{{soli.STATUS}}</span></td> -->
                <td><button class="btn btn-brand btn-sm btn-openid" type="button" (click)="smallModal3.show()"
                    style="margin-bottom: 4px" (click)="modificarSol(soli.PK_USER_ASESORIA_HORARIO,soli.MATERIA,
                  soli.DIA,soli.HORA)"><i
                      class="fa fa-edit"></i></button>
                  <button class="btn btn-brand btn-sm btn-youtube" type="button" style="margin-bottom: 4px"
                    (click)="borraSolicitud(soli.PK_USER_ASESORIA_HORARIO)">
                    <i class="cui-delete"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="d-flex justify-content-center">
            <pagination-controls id="second" class="myPagination" previousLabel="" nextLabel="" maxSize="10"
              (pageChange)="pageActual1 = $event">
            </pagination-controls>
          </div>
          <!--           <nav>
                        <ul class="pagination">
                          <li class="page-item"><a class="page-link" href="#">Prev</a></li>
                          <li class="page-item active"><a class="page-link" href="#">1</a></li>
                          <li class="page-item"><a class="page-link" href="#">2</a></li>
                          <li class="page-item"><a class="page-link" href="#">3</a></li>
                          <li class="page-item"><a class="page-link" href="#">4</a></li>
                          <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        </ul>
                      </nav>   -->



          <!--/.col-->


        </div>
      </div>
    </div>
  </div>
</div>

<div bsModal #smallModal1="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">HORARIO DEL ASESOR</h4>
        <button type="button" class="close" (click)="smallModal1.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered table-striped table-sm" cellpadding="20">
          <thead>
            <tr>
              <th>Clave Grupo</th>
              <th>Clave Materia</th>
              <th>Nombre</th>
              <th>Lunes</th>
              <th>Martes</th>
              <th>Miercoles</th>
              <th>Jueves</th>
              <th>Viernes</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let soli of horarioUser; let i = index">
              
              <td>{{soli.clavegrupo}}</td>
              <td>{{soli.clavemateria}}</td>
              <td>{{soli.nombre}}</td>
              <td>{{soli.Lunes}}</td>
              <td>{{soli.Martes}}</td>
              <td>{{soli.Miercoles}}</td>
              <td>{{soli.Jueves}}</td>
              <td>{{soli.Viernes}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="smallModal1.hide()">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #smallModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Seguimiento Academico </h4>
        <button type="button" class="close" (click)="smallModal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered table-striped table-sm">
          <thead>
            <tr>
              <th>CLAVE_MATERIA</th>
              <th>NOMBRE</th>
              <th>CURSO</th>
              <th>CALIFICACION</th>
              <th>{{promedio}}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let soli of seguimientoAsesor">
              <td>{{soli.ClaveMateria}}</td>
              <td>{{soli.Nombre}}</td>
              <td>{{soli.IdNivelCurso}}</td>
              <td>{{soli.Calificacion}}</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="smallModal.hide()">Cerrar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #smallModal2="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">EDITAR ASESOR </h4>
        <button type="button" class="close" (click)="smallModal2.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered table-striped table-sm">
          <thead>
            <tr>
              <th>ID</th>
              <th>MATERIA 1</th>
              <th>MATERIA 2</th>
              <th>MATERIA 3</th>
              <th>DIA</th>
              <th>HORA</th>
              <th>VALIDA</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input [(ngModel)]="form.id" type="text" class="form-control" disabled size="6"></td>
              <td><input [(ngModel)]="form.materia1" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.materia2" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.materia3" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.dia" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.hora" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.valida" type="text" class="form-control"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="smallModal2.hide()">Cerrar</button>
        <button type="button" class="btn btn-primary" (click)="actualiza()"
          (click)="smallModal2.hide()">Guardar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div bsModal #smallModal3="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">EDITAR ALUMNO </h4>
        <button type="button" class="close" (click)="smallModal3.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="table table-bordered table-striped table-sm">
          <thead>
            <tr>
              <th>ID</th>
              <th>MATERIA</th>
              <th>DIA</th>
              <th>HORA</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input [(ngModel)]="form.id1" type="text" class="form-control" disabled size="6"></td>
              <td><input [(ngModel)]="form.materia" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.dia1" type="text" class="form-control"></td>
              <td><input [(ngModel)]="form.hora1" type="text" class="form-control"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="smallModal3.hide()">Cerrar</button>
        <button type="button" class="btn btn-primary" (click)="actualizaSolicitud()"
          (click)="smallModal3.hide()">Guardar</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->